---
layout: page
permalink: /cal/
title: cal
comment: actual calendar is autogenerated, see `_data/cal.json`
---

<style>

.header {
  margin: 0 0 1em 0;
  padding: 1em;
  background-color: #EEEEEE;
}

.item {
  padding: 0 1em 1em 1em;
}

.due {
  font-weight: bold;
}

h2, ul {
  margin-bottom: 0
}

</style>

**This schedule will change as we calibrate the first few weeks of the course.**   
**Note: some links will be blank until they're assigned/uploaded.**

<div id="cal">
</div>

<script>
var cal_data = {{ site.data.cal | jsonify }};

var cal_div = d3.select('#cal');

cal_div.selectAll('.event')
  .data(cal_data)
  .enter().append('div')
  .attr('class', 'event')
  .html( render_event )

function render_event(d, i, A) {
  var s = '';
  if (d.header)
    s += '<div class="header">' + render_header(d.header) + '</div>';
  else
    s += '<div class="item">' + render_item(d) + '</div>';
  return s;
}

function render_header(d) {
  var s = '<h2 class="header-title">' + d.title + '</h2>';
  return s;
}

function reading_link(d) {
  var s = '';
  if(d.link != "")
    s += '<a href="' + d.link + '" target="_blank">' + d.text + '</a>'
  else
    s += d.text
  return s;
}

function render_item(d) {
  var s = '';
  if (d.date)
    s += '<div class="date">' + date_rejigger(d.date) + '</div>';
  if(d.topic)
    s += '<div class="topic">Topic: ' + d.topic + '</div>';
  if(d.lab)
    s += '<div class="topic">Lab: ' + lab_link(d.lab) + '</div>';
  if(d.assigned)
    d.assigned.forEach( function(a) {
      s += '<div class="assigned">Assigned: ' + assigned_str(a) + '</div>';
    });
  if (d.reading) {
    s += '<div>Reading:</div><ul>'
    d.reading.forEach( function(a) {
      s += '<li>' + reading_link(a) + '</li>';
    })
    s += '</ul>';
  }
  if (d.suggested) {
    s += '<div>Suggested Reading:</div><ul>';
    d.suggested.forEach( function(a) {
      s += '<li>' + reading_link(a) + '</li>';
    });
    s += '</ul>';
  }
  if(d.due)
    s += '<div class="due">Due: ' + d.due + '</div>';
  if(d.materials)
    s += '<div class="materials">' + materials_link(d.materials) + '</div>';
  if(d.vid)
    s += '<div class="vid">' + vid_link(d.vid) + '</div>';
  if(d.text)
    s += '<div>' + d.text + '</div>';
  return s;
}

function lab_link(d) {
  var s = '';
  s += '<a href="/' + d.link + '">' + d.text + '</a>';
  return s;
}

function materials_link(d) {
  var s = '';
  s += '<a href="/' + d + '">materials</a>';
  return s;
}

function vid_link(d) {
  var s = '';
  s += '<a href="' + d + '">vid</a>';
  return s;
}

function assigned_str(d) {
var s = '';
if(d.link != "")
  s += '<a href="' + d.link + '">' + d.text + '</a>';
else
  s += d.text;
return s;
}

function date_rejigger(d) {
  var s = moment(d, "DD-MMM-YYYY");
  return s.format('DD-MMM ddd');
}

</script>
